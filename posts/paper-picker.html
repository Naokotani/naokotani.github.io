
<!doctype html>
<html lang="en">


<head>
  <meta charset="UTF-8" />
  <title>Paper Picker</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Chris Hughes&#39; developer blog focused on web development, programming, and technology." />
  <link rel="stylesheet" type="text/css" href="/static/css/normalize.css">
  <link rel="stylesheet" type="text/css" href="/static/css/vars.css">
  <link rel="stylesheet" type="text/css" href="/static/css/styles.css">
  <script>
    const theme = localStorage.getItem("pref-theme")
    if (theme === "dark") {
      document.documentElement.style.background = "#141414";
    } else if (theme === "light") {
      document.documentElement.style.background = "#fefefe";
    } else {
      if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.documentElement.style.background = "#141414";
      } else if (window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches) {
        document.documentElement.style.background = "#fefefe";
      }
    }
  </script>
  <link href="https://fonts.googleapis.com/css2?family=Libre&#43;Baskerville&amp;family=Source&#43;Sans&#43;Pro&amp;display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="shortcut icon" type="image/png" href="/static/icons/favicon-16x16.png" />
  <link rel="alternate" type="application/rss+xml" title="Paper Picker" href="/rss">
  <script src="/static/js/colors.js" defer></script>
  <script src="/static/js/menu.js" defer></script>
</head>


<header class="desktop">
  <nav>
    <a href="/">
      <h2>Chris Hughes dot Dev</h2>
    </a>
    <div class="social-links">
    
      <a href="/resume/resume.html">Resume</a>
    
    
      <a href="/about/about.html">About</a>
    
      
      <a href="https://github.com/Naokotani" target="_blank" rel="noopener noreferrer">
        GitHub
      </a>
      
      
      <a href="mailto: chris@chris-hughes.dev">
        <svg class="nav-icon" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 640 640"><path d="M112 128C85.5 128 64 149.5 64 176C64 191.1 71.1 205.3 83.2 214.4L291.2 370.4C308.3 383.2 331.7 383.2 348.8 370.4L556.8 214.4C568.9 205.3 576 191.1 576 176C576 149.5 554.5 128 528 128L112 128zM64 260L64 448C64 483.3 92.7 512 128 512L512 512C547.3 512 576 483.3 576 448L576 260L377.6 408.8C343.5 434.4 296.5 434.4 262.4 408.8L64 260z"/></svg>
      </a>
      
      
      <a href="/rss.xml">
        <svg class="nav-icon" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 640 640"><path d="M96 128C96 110.3 110.3 96 128 96C357.8 96 544 282.2 544 512C544 529.7 529.7 544 512 544C494.3 544 480 529.7 480 512C480 317.6 322.4 160 128 160C110.3 160 96 145.7 96 128zM96 480C96 444.7 124.7 416 160 416C195.3 416 224 444.7 224 480C224 515.3 195.3 544 160 544C124.7 544 96 515.3 96 480zM128 224C287.1 224 416 352.9 416 512C416 529.7 401.7 544 384 544C366.3 544 352 529.7 352 512C352 388.3 251.7 288 128 288C110.3 288 96 273.7 96 256C96 238.3 110.3 224 128 224z"/></svg>
      </a>
      
      <button id="theme-toggle">
        <svg class="nav-icon" id="moon" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M303.3 112.7C196.2 121.2 112 210.8 112 320C112 434.9 205.1 528 320 528C353.3 528 384.7 520.2 412.6 506.3C309.2 482.9 232 390.5 232 280C232 214.2 259.4 154.9 303.3 112.7zM64 320C64 178.6 178.6 64 320 64C339.4 64 358.4 66.2 376.7 70.3C386.6 72.5 394 80.8 395.2 90.8C396.4 100.8 391.2 110.6 382.1 115.2C321.5 145.4 280 207.9 280 280C280 381.6 362.4 464 464 464C469 464 473.9 463.8 478.8 463.4C488.9 462.6 498.4 468.2 502.6 477.5C506.8 486.8 504.6 497.6 497.3 504.6C451.3 548.8 388.8 576 320 576C178.6 576 64 461.4 64 320z"/></svg>
        <svg class="nav-icon" id="bulb" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M424.5 355.1C449 329.2 464 294.4 464 256C464 176.5 399.5 112 320 112C240.5 112 176 176.5 176 256C176 294.4 191 329.2 215.5 355.1C236.8 377.5 260.4 409.1 268.8 448L371.2 448C379.6 409 403.2 377.5 424.5 355.1zM459.3 388.1C435.7 413 416 443.4 416 477.7L416 496C416 540.2 380.2 576 336 576L304 576C259.8 576 224 540.2 224 496L224 477.7C224 443.4 204.3 413 180.7 388.1C148 353.7 128 307.2 128 256C128 150 214 64 320 64C426 64 512 150 512 256C512 307.2 492 353.7 459.3 388.1zM272 248C272 261.3 261.3 272 248 272C234.7 272 224 261.3 224 248C224 199.4 263.4 160 312 160C325.3 160 336 170.7 336 184C336 197.3 325.3 208 312 208C289.9 208 272 225.9 272 248z"/></svg>
      </button>
    </div>
  </nav>
</header>
<header class="mobile">
  <nav>
    <a href="/">
      <h2>Chris Hughes.Dev</h2>
    </a>
    <a href="javascript:void(0);" onclick="handleSocial()">
      <i class="fa fa-bars menu"></i>
    </a>
  </nav>
</header>
<div id="social-menu" style="display: none;">
  <div class="mobile-social">
    <a href="/rss">
      <svg xmlns="http://www.w2.org/2000/svg" fill="currentColor" viewBox="0 0 640 640"><path d="M96 128C96 110.3 110.3 96 128 96C357.8 96 544 282.2 544 512C544 529.7 529.7 544 512 544C494.3 544 480 529.7 480 512C480 317.6 322.4 160 128 160C110.3 160 96 145.7 96 128zM96 480C96 444.7 124.7 416 160 416C195.3 416 224 444.7 224 480C224 515.3 195.3 544 160 544C124.7 544 96 515.3 96 480zM128 224C287.1 224 416 352.9 416 512C416 529.7 401.7 544 384 544C366.3 544 352 529.7 352 512C352 388.3 251.7 288 128 288C110.3 288 96 273.7 96 256C96 238.3 110.3 224 128 224z"/></svg>
    </a>
    
    <a href="mailto: chris@chris-hughes.dev">
      <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 640 640"><path d="M112 128C85.5 128 64 149.5 64 176C64 191.1 71.1 205.3 83.2 214.4L291.2 370.4C308.3 383.2 331.7 383.2 348.8 370.4L556.8 214.4C568.9 205.3 576 191.1 576 176C576 149.5 554.5 128 528 128L112 128zM64 260L64 448C64 483.3 92.7 512 128 512L512 512C547.3 512 576 483.3 576 448L576 260L377.6 408.8C343.5 434.4 296.5 434.4 262.4 408.8L64 260z"/></svg>
    </a>
    
    
    <a href="https://github.com/Naokotani" target="_blank" rel="noopener noreferrer">
      <svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M237.9 461.4C237.9 463.4 235.6 465 232.7 465C229.4 465.3 227.1 463.7 227.1 461.4C227.1 459.4 229.4 457.8 232.3 457.8C235.3 457.5 237.9 459.1 237.9 461.4zM206.8 456.9C206.1 458.9 208.1 461.2 211.1 461.8C213.7 462.8 216.7 461.8 217.3 459.8C217.9 457.8 216 455.5 213 454.6C210.4 453.9 207.5 454.9 206.8 456.9zM251 455.2C248.1 455.9 246.1 457.8 246.4 460.1C246.7 462.1 249.3 463.4 252.3 462.7C255.2 462 257.2 460.1 256.9 458.1C256.6 456.2 253.9 454.9 251 455.2zM316.8 72C178.1 72 72 177.3 72 316C72 426.9 141.8 521.8 241.5 555.2C254.3 557.5 258.8 549.6 258.8 543.1C258.8 536.9 258.5 502.7 258.5 481.7C258.5 481.7 188.5 496.7 173.8 451.9C173.8 451.9 162.4 422.8 146 415.3C146 415.3 123.1 399.6 147.6 399.9C147.6 399.9 172.5 401.9 186.2 425.7C208.1 464.3 244.8 453.2 259.1 446.6C261.4 430.6 267.9 419.5 275.1 412.9C219.2 406.7 162.8 398.6 162.8 302.4C162.8 274.9 170.4 261.1 186.4 243.5C183.8 237 175.3 210.2 189 175.6C209.9 169.1 258 202.6 258 202.6C278 197 299.5 194.1 320.8 194.1C342.1 194.1 363.6 197 383.6 202.6C383.6 202.6 431.7 169 452.6 175.6C466.3 210.3 457.8 237 455.2 243.5C471.2 261.2 481 275 481 302.4C481 398.9 422.1 406.6 366.2 412.9C375.4 420.8 383.2 435.8 383.2 459.3C383.2 493 382.9 534.7 382.9 542.9C382.9 549.4 387.5 557.3 400.2 555C500.2 521.8 568 426.9 568 316C568 177.3 455.5 72 316.8 72zM169.2 416.9C167.9 417.9 168.2 420.2 169.9 422.1C171.5 423.7 173.8 424.4 175.1 423.1C176.4 422.1 176.1 419.8 174.4 417.9C172.8 416.3 170.5 415.6 169.2 416.9zM158.4 408.8C157.7 410.1 158.7 411.7 160.7 412.7C162.3 413.7 164.3 413.4 165 412C165.7 410.7 164.7 409.1 162.7 408.1C160.7 407.5 159.1 407.8 158.4 408.8zM190.8 444.4C189.2 445.7 189.8 448.7 192.1 450.6C194.4 452.9 197.3 453.2 198.6 451.6C199.9 450.3 199.3 447.3 197.3 445.4C195.1 443.1 192.1 442.8 190.8 444.4zM179.4 429.7C177.8 430.7 177.8 433.3 179.4 435.6C181 437.9 183.7 438.9 185 437.9C186.6 436.6 186.6 434 185 431.7C183.6 429.4 181 428.4 179.4 429.7z"/></svg>
    </a>
    
    
    <a href="/resume/resume.html">
        <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 640 640"><path d="M112 128C85.5 128 64 149.5 64 176C64 191.1 71.1 205.3 83.2 214.4L291.2 370.4C308.3 383.2 331.7 383.2 348.8 370.4L556.8 214.4C568.9 205.3 576 191.1 576 176C576 149.5 554.5 128 528 128L112 128zM64 260L64 448C64 483.3 92.7 512 128 512L512 512C547.3 512 576 483.3 576 448L576 260L377.6 408.8C343.5 434.4 296.5 434.4 262.4 408.8L64 260z"/></svg>
    </a>
    
    <button id="theme-toggle-mobile">
        <svg id="moon-mobile" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M303.3 112.7C196.2 121.2 112 210.8 112 320C112 434.9 205.1 528 320 528C353.3 528 384.7 520.2 412.6 506.3C309.2 482.9 232 390.5 232 280C232 214.2 259.4 154.9 303.3 112.7zM64 320C64 178.6 178.6 64 320 64C339.4 64 358.4 66.2 376.7 70.3C386.6 72.5 394 80.8 395.2 90.8C396.4 100.8 391.2 110.6 382.1 115.2C321.5 145.4 280 207.9 280 280C280 381.6 362.4 464 464 464C469 464 473.9 463.8 478.8 463.4C488.9 462.6 498.4 468.2 502.6 477.5C506.8 486.8 504.6 497.6 497.3 504.6C451.3 548.8 388.8 576 320 576C178.6 576 64 461.4 64 320z"/></svg>
        <svg id="bulb-mobile" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M424.5 355.1C449 329.2 464 294.4 464 256C464 176.5 399.5 112 320 112C240.5 112 176 176.5 176 256C176 294.4 191 329.2 215.5 355.1C236.8 377.5 260.4 409.1 268.8 448L371.2 448C379.6 409 403.2 377.5 424.5 355.1zM459.3 388.1C435.7 413 416 443.4 416 477.7L416 496C416 540.2 380.2 576 336 576L304 576C259.8 576 224 540.2 224 496L224 477.7C224 443.4 204.3 413 180.7 388.1C148 353.7 128 307.2 128 256C128 150 214 64 320 64C426 64 512 150 512 256C512 307.2 492 353.7 459.3 388.1zM272 248C272 261.3 261.3 272 248 272C234.7 272 224 261.3 224 248C224 199.4 263.4 160 312 160C325.3 160 336 170.7 336 184C336 197.3 325.3 208 312 208C289.9 208 272 225.9 272 248z"/></svg>
    </button>
  </div>
</div>

<div id="contentDiv" class="contentDiv">

<summary>
  A simple shell script to get random images for Hyprpaper.
</summary>
<h1>Paper Picker</h1>
<p><small class="date">Published: 7 Oct 2025 at 13:51 ADT</small></p>
<p><small class="tech">Hyprland | Bash</small></p>
<p>
I recently made the switch from Windows 11 using WSL to Arch using Hyprland as my desktop environment, and I couldn&rsquo;t be happier with the change. Windows 11 came pre-installed on my laptop, and I didn&rsquo;t initially get around to changing the OS. WSL is impressive in a sense, it&rsquo;s very good at what it does, but Windows in general is a pain and small issues kept cropping up, so I made the switch.
</p>

<p>
This was also my first time using either Wayland or Pipewire/Wireplumber, so I was a bit concerned about using Wayland with my GTX 3060, but so far so it hasn&rsquo;t caused many issues. The only issue I haven&rsquo;t been able to resolve was that Emacs clients will crash when I switch desktops from time to time, but using the Emacs daemon isn&rsquo;t actually a part of my workflow, so I can happily overlook that for now until I figure it out or it gets fixed by an update.
</p>
<div id="outline-container-org7ccae1e" class="outline-2">
<h2 id="org7ccae1e">The Script</h2>
<div class="outline-text-2" id="text-org7ccae1e">
<p>
I was initially turned off by the simplicity of <a href="https://github.com/hyprwm/hyprpaper">hyprpaper</a>, but after closer inspection I realized that with a bit of effort and a shell script, it provided me with the tools I needed to configure it to work pretty much however I wanted. I set to work on making <a href="https://github.com/Naokotani/dotfiles/blob/master/.config/hypr/scripts/start_paper.sh">this script</a> to control how my wallpapers are loaded. I thought I would share how I did it in the hopes that it could be helpful to someone else doing a similar setup or perhaps someone could recommend some changes to improve it.
</p>

<div class="org-src-container">
<pre class="src src-bash"><span style="color: #51587a;"># </span><span style="color: #51587a;">Setup wallaper directory and monitor names.</span>
<span style="color: #c0caf5;">dir</span>=<span style="color: #9ece6a;">"/home/naokotani/Pictures/wallpapers/"</span>
<span style="color: #c0caf5;">monitor1</span>=<span style="color: #9ece6a;">"eDP-1"</span>
<span style="color: #c0caf5;">monitor2</span>=<span style="color: #9ece6a;">"DP-1"</span>

<span style="color: #c0caf5;">cd</span> $<span style="color: #c0caf5;">dir</span>

<span style="color: #51587a;"># </span><span style="color: #51587a;">Get a list of the .png files in the directory.</span>
<span style="color: #c0caf5;">papers</span>=<span style="color: #a9b1d6;">(</span><span style="color: #9ece6a;">"</span><span style="color: #ff9e64;">$</span><span style="color: #c0caf5;">{dir}</span><span style="color: #9ece6a;">"</span>*.png<span style="color: #a9b1d6;">)</span>

<span style="color: #c0caf5;">cd</span> /home/naokotani/.config/hypr/

<span style="color: #51587a;"># </span><span style="color: #51587a;">Get the length of the list of files.</span>
<span style="color: #c0caf5;">length</span>=$<span style="color: #a9b1d6;">{</span>#<span style="color: #c0caf5;">papers</span><span style="color: #7aa2f7;">[</span>@<span style="color: #7aa2f7;">]</span><span style="color: #a9b1d6;">}</span>
</pre>
</div>

<p>
This section sets everything up. I set the values for the wallpaper directory and my monitor names. This makes it easy to change later because I just need to change it once at the start of the file. I then cd into the directory and get the list of .png files. hyprpaper only works on .png, so I want to filter out any .jpg or other files that might be left in there so it doesn&rsquo;t break. I also remove my old hyprpaper.conf because I am going to be generating a new one from scratch. Finally, I get the length of the list of files that I will be using to choose a random wallpaper later.
</p>

<div class="org-src-container">
<pre class="src src-bash"><span style="color: #51587a;"># </span><span style="color: #51587a;">Get the first random index.</span>
<span style="color: #c0caf5;">first</span>=$<span style="color: #a9b1d6;">(</span><span style="color: #7aa2f7;">(</span><span style="color: #ff9e64; font-weight: bold;">1</span> + $<span style="color: #c0caf5;">RANDOM</span> % $<span style="color: #c0caf5;">length</span> - <span style="color: #ff9e64; font-weight: bold;">1</span><span style="color: #7aa2f7;">)</span><span style="color: #a9b1d6;">)</span>

<span style="color: #bb9af7;">function</span> <span style="color: #7aa2f7;">dif_random</span> <span style="color: #a9b1d6;">{</span>
    <span style="color: #c0caf5;">second</span>=$<span style="color: #7aa2f7;">(</span><span style="color: #ff9e64;">(</span><span style="color: #ff9e64; font-weight: bold;">1</span> + $<span style="color: #c0caf5;">RANDOM</span> % $<span style="color: #c0caf5;">length</span> - <span style="color: #ff9e64; font-weight: bold;">1</span><span style="color: #ff9e64;">)</span><span style="color: #7aa2f7;">)</span>

    <span style="color: #51587a;"># </span><span style="color: #51587a;">Check to see if the second random index is equal</span>
    <span style="color: #51587a;"># </span><span style="color: #51587a;">to the first, if so, </span><span style="color: #51587a;">find</span><span style="color: #51587a;"> a new one.</span>
    <span style="color: #bb9af7;">if</span> <span style="color: #7aa2f7;">[</span> $<span style="color: #ff9e64; font-weight: bold;">1</span> -eq $<span style="color: #c0caf5;">second</span> <span style="color: #7aa2f7;">]</span>
    <span style="color: #bb9af7;">then</span>
        dif_random <span style="color: #9ece6a;">"</span><span style="color: #ff9e64;">$</span><span style="color: #c0caf5;">1</span><span style="color: #9ece6a;">"</span>
    <span style="color: #bb9af7;">else</span>
        <span style="color: #bb9af7;">return</span> $<span style="color: #c0caf5;">second</span>
    <span style="color: #bb9af7;">fi</span>
<span style="color: #a9b1d6;">}</span>

<span style="color: #51587a;"># </span><span style="color: #51587a;">Make sure that there is more than one file.</span>
<span style="color: #51587a;"># </span><span style="color: #51587a;">This avoids an infite loop.</span>
<span style="color: #bb9af7;">if</span> <span style="color: #a9b1d6;">[</span> $<span style="color: #c0caf5;">length</span> -gt <span style="color: #ff9e64; font-weight: bold;">1</span> <span style="color: #a9b1d6;">]</span>
<span style="color: #bb9af7;">then</span>
    dif_random <span style="color: #9ece6a;">"</span><span style="color: #ff9e64;">$</span><span style="color: #c0caf5;">first</span><span style="color: #9ece6a;">"</span>
    <span style="color: #c0caf5;">second</span>=$<span style="color: #c0caf5;">?</span>
<span style="color: #bb9af7;">else</span>
    <span style="color: #c0caf5;">second</span>=$<span style="color: #c0caf5;">first</span>
<span style="color: #bb9af7;">fi</span>
</pre>
</div>

<p>
This little section is responsible for selecting a random paper by taking the length and deducting one to select a random index. Then the function <code>dif_random()</code> will get a second random number and check to see if it is the same as the first, if it is, it will run the function again with the first random number as the argument. Once it finds a valid number it returns it. There is no doubt a better way to do this, but this works well enough. Finally I check to make sure that the length is greater than 1 before I actually call the function. If it&rsquo;s not, it doesn&rsquo;t call <code>dif_random()</code> because that would end up causing a stack overflow or infinite loop, either way it would break the script.
</p>

<div class="org-src-container">
<pre class="src src-bash"><span style="color: #51587a;"># </span><span style="color: #51587a;">Use the random indexes to get the two filenames</span>
<span style="color: #c0caf5;">paper_one</span>=$<span style="color: #a9b1d6;">{</span><span style="color: #c0caf5;">papers</span><span style="color: #7aa2f7;">[</span>$<span style="color: #c0caf5;">first</span><span style="color: #7aa2f7;">]</span><span style="color: #a9b1d6;">}</span>
<span style="color: #c0caf5;">paper_two</span>=$<span style="color: #a9b1d6;">{</span><span style="color: #c0caf5;">papers</span><span style="color: #7aa2f7;">[</span>$<span style="color: #c0caf5;">second</span><span style="color: #7aa2f7;">]</span><span style="color: #a9b1d6;">}</span>

<span style="color: #51587a;"># </span><span style="color: #51587a;">Check to see if hyprpaper is running</span>
<span style="color: #bb9af7;">if</span> <span style="color: #c0caf5;">pgrep</span> -x <span style="color: #9ece6a;">"hyprpaper"</span> &gt; /dev/null
<span style="color: #bb9af7;">then</span>
    <span style="color: #51587a;"># </span><span style="color: #51587a;">If hyprpaper is running, select two new preloaded wallpapers</span>
    hyprctl hyprpaper wallpaper <span style="color: #9ece6a;">"</span><span style="color: #ff9e64;">$</span><span style="color: #c0caf5;">{monitor1}</span><span style="color: #9ece6a;">,</span><span style="color: #ff9e64;">$</span><span style="color: #c0caf5;">{paper_one}</span><span style="color: #9ece6a;">"</span>
    hyprctl hyprpaper wallpaper <span style="color: #9ece6a;">"</span><span style="color: #ff9e64;">$</span><span style="color: #c0caf5;">{monitor2}</span><span style="color: #9ece6a;">,</span><span style="color: #ff9e64;">$</span><span style="color: #c0caf5;">{paper_two}</span><span style="color: #9ece6a;">"</span>
<span style="color: #bb9af7;">else</span>
    <span style="color: #51587a;"># </span><span style="color: #51587a;">Remove the old conf file.</span>
    <span style="color: #c0caf5;">rm</span> -f hyprpaper.conf

    <span style="color: #51587a;"># </span><span style="color: #51587a;">If it's not running, generate a new hyprpaper.conf</span>
    <span style="color: #bb9af7;">for</span> p<span style="color: #bb9af7;"> in</span> <span style="color: #9ece6a;">"</span><span style="color: #ff9e64;">$</span><span style="color: #c0caf5;">{papers[@]}</span><span style="color: #9ece6a;">"</span>;
    <span style="color: #bb9af7;">do</span>
        <span style="color: #c0caf5;">echo</span> <span style="color: #9ece6a;">"preload = </span><span style="color: #ff9e64;">$</span><span style="color: #c0caf5;">{p}</span><span style="color: #9ece6a;">"</span> &gt;&gt; hyprpaper.conf
    <span style="color: #bb9af7;">done</span>

    <span style="color: #c0caf5;">echo</span> <span style="color: #9ece6a;">"wallpaper = </span><span style="color: #ff9e64;">$</span><span style="color: #c0caf5;">{monitor1}</span><span style="color: #9ece6a;">,</span><span style="color: #ff9e64;">$</span><span style="color: #c0caf5;">{paper_one}</span><span style="color: #9ece6a;">"</span> &gt;&gt;  hyprpaper.conf
    <span style="color: #c0caf5;">echo</span> <span style="color: #9ece6a;">"wallpaper = </span><span style="color: #ff9e64;">$</span><span style="color: #c0caf5;">{monitor2}</span><span style="color: #9ece6a;">,</span><span style="color: #ff9e64;">$</span><span style="color: #c0caf5;">{paper_two}</span><span style="color: #9ece6a;">"</span> &gt;&gt; hyprpaper.conf

    <span style="color: #51587a;"># </span><span style="color: #51587a;">Start hyprpaper</span>
    hyprpaper &amp;
    <span style="color: #f7768e;">disown</span>
<span style="color: #bb9af7;">fi</span>
</pre>
</div>

<p>
Finally, I use my newly created numbers to index into the papers list and grab two random file names. I then check to see if hyprpaper is running, if it is I load the new wallpapers, if it is not I generate a new <code>hyprpaper.conf</code> and start hyprpaper.
</p>
</div>
</div>
<div id="outline-container-org2fa8993" class="outline-2">
<h2 id="org2fa8993">That&rsquo;s Great, but How Do I Use it?</h2>
<div class="outline-text-2" id="text-org2fa8993">
<p>
I place this script in two places in my <code>hypland.conf</code> file. First I put it as an exec-once command. This way whenever hyprland starts, it will run the script, find that hyprpaper is inevitably not running, generate the <code>hyprpaper.conf</code>, select two random wallpapers and start hyprpaper. If at any point I want to change my wallpaper list, I just need to change the directory in the script, or put new wallpapers in the wallpapers directory, <code>pkill -9 hyprpaper</code> and run the script. This will regenerate a new configuration from the directory and reload hyprpaper. I also bind the script to a keybind so that, whenever I feel the need, I can pick two new random wallpapers.
</p>

<p>
Finally, you can use cron to have the script run on a schedule once an hour, once a day or whatever you like to periodically change your wallpaper. This shouldn&rsquo;t have cause any significant performance issues if it comes up in the middle of doing something else because the wallpapers are already pre-loaded into memory.
</p>
</div>
</div>
<div id="outline-container-orgd713b33" class="outline-2">
<h2 id="orgd713b33">Other Observations</h2>
<div class="outline-text-2" id="text-orgd713b33">
<p>
I initially ran this script on about a dozen very large image files. As is pointed out in the documentation for hyprpaper, this both took a long time to load (I believe it was around 8 seconds), and took a decent chunk of memory. I was able to mitigate this problem a little bit by getting rid of a few of my least favorite wallpapers and then using <a href="https://imagemagick.org/index.php">ImageMagick</a> to reduce the size of the images down to my actual screen resolution by running <code>magick image.png --resize 2560x1440 image.png</code> you can also use this to switch from a different file type to a png, for example: <code>magick image.jpg --resize 2560x1440 image.png</code> reducing the size of the images greatly reduced the time it took to load going down to perhaps a second or less (the initial images were something in the order of 8000x6000, which was quite excessive anyway).
</p>

<p>
Another small issue with the script is that it will always choose two different images, but one or both of them might be the same as the one that is already loaded. I thought about using the suggested command from the wiki, <code>hyprctl hyprpaper listactive</code> to find the active paper, but for some reason it just wasn&rsquo;t working. I finally determined that this wasn&rsquo;t such a big issue. The wallpapers almost instantly, so its not a big deal to simple press the keybind twice if I get a result I don&rsquo;t like.
</p>
</div>
</div>
<div id="outline-container-org85fc04a" class="outline-2">
<h2 id="org85fc04a">Getting a Random Image</h2>
<div class="outline-text-2" id="text-org85fc04a">
<p>
(Credit to <a href="https://github.com/trevarj/dotfiles">trev</a> for these observations)
</p>

<p>
My method for getting a random image involved using a recursive function that keeps getting called until two different random numbers are selected. It&rsquo;s also possible to use a while loop to accomplish the same thing, but the effective difference between the two is probably pretty trivial. Both would have the limitation of creating an infinite loop if fewer than two filenames are supplied, which requires the check to make sure <code>$length</code> is greater than 1. This solution requires quite a few lines of code and is a bit complex. It also depends on <code>$RANDOM</code>, which is a bash internal. A similar solution could be based on using the <a href="https://man7.org/linux/man-pages/man1/shuf.1.html">shuf</a> coreutil, which would be less complicated, require fewer lines of code and be more readable. If you wanted the script to be fully posix compliant, you could generate a random number yourself in the script instead of relying on <code>$RANDOM</code>.
</p>
</div>
</div>


</div>

<footer>
  <div>
    <a href="/">Home</a>
    <a href="mailto: chris@chris-hughes.dev">Email</a>
    <div>
      <small>&copy; Chris Hughes 2025</small>
    </div>
  </div>
</footer>

</html>
